(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3770],{24811:(e,l,t)=>{Promise.resolve().then(t.bind(t,96703))},66168:(e,l,t)=>{"use strict";t.d(l,{v:()=>o});var i=t(95155),n=t(58226),r=t(52480);let o=e=>{let{children:l,...t}=e;return(0,i.jsx)(r.A,{content:(0,i.jsx)(n.P,{children:l}),children:(0,i.jsx)(n.P,{w:"full",lineClamp:1,cursor:"pointer",...t,children:l})})}},73457:(e,l,t)=>{"use strict";t.d(l,{S:()=>a});var i=t(95155),n=t(93454),r=t(80968),o=t(92091),s=t(2186);let a=(0,t(12115).forwardRef)(function(e,l){let{icon:t,children:a,inputProps:d,rootRef:c,checked:u,subtle:x,...p}=e,{themeConfig:m}=(0,n.p)(),h="0px"===m.radii.component;return(0,i.jsxs)(r.y8,{ref:c,cursor:e.disabled?"not-allowed":"pointer",colorPalette:m.colorPalette,...p,children:[(0,i.jsx)(r.Ks,{ref:l,...d}),(0,i.jsx)(r.v7,{bg:p.bg||u?m.primaryColor:x?"bg.muted":"transparent",rounded:(null==e?void 0:e.rounded)||h?"0px":"sm",borderColor:p.borderColor||u?"transparent":x?"border.muted":"d3",cursor:e.disabled?"not-allowed":"pointer",children:u&&(0,i.jsx)(o.I,{boxSize:4,color:"".concat(m.colorPalette,".contrast"),children:t||(0,i.jsx)(s.A,{})})}),null!=a&&(0,i.jsx)(r.Sb,{children:a})]})})},96703:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>e8});var i=t(95155),n=t(46426),r=t(25535),o=t(10502),s=t(50851),a=t(88890),d=t(58226),c=t(46980),u=t.n(c);function x(e){let{html:l}=e,t=u().sanitize(l);return(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}var p=t(38126),m=t(46767),h=t(93454);let j=e=>{let{children:l,scrollY:t=!1,...n}=e,{themeConfig:o}=(0,h.p)();return(0,i.jsx)(r.T,{className:t?"scrollY":"",bg:"body",rounded:o.radii.container,...n,children:l})};var g=t(45720),v=t(7791);let f=e=>{var l,t,n;let{topicDetail:r,...o}=e;return(0,i.jsx)(j,{p:4,justify:"center",...o,children:(0,i.jsx)(g.T,{fileUrl:(0,v.iw)(null==r||null==(n=r.learningAttempt)||null==(t=n.certificate)||null==(l=t[0])?void 0:l.filePath),aspectRatio:16/11})})};var b=t(50588),k=t(77141),A=t(98886),z=t(31120),P=t(55803),w=t(36780),y=t(93885),S=t(40773),T=t(2431),_=t(94787),C=t(76150),q=t(41521),E=t(20063),I=t(35068);let D=e=>{var l,t,o,s,a,c;let{topicDetail:u,...x}=e,{l:p}=(0,w.A)(),m=(0,y.A)(e=>e.setRt),h=(0,E.useRouter)(),{req:j,loading:g}=(0,S.A)({id:"submit-feedback",successMessage:p.success_feedback_submitted}),v=(0,q.Wx)({validateOnChange:!1,initialValues:{feedback:(null==u||null==(l=u.learningAttempt)?void 0:l.feedback)?{id:null==u||null==(t=u.learningAttempt)?void 0:t.feedback,label:(0,T.Ds)(p,"feedback_label_".concat(null==u||null==(o=u.learningAttempt)?void 0:o.feedback))}:null,comment:null==u||null==(s=u.learningAttempt)?void 0:s.feedbackComment},validationSchema:I.Ik().shape({feedback:I.Ik().required(p.msg_required_form),comment:I.Yj().required(p.msg_required_form)}),onSubmit:e=>{var l;let t={feedback:null==(l=e.feedback)?void 0:l.id,comment:e.comment};j({config:{url:"/api/kmis/learning-course/feedback/".concat(null==u?void 0:u.learningAttempt.id),method:"PATCH",data:t},onResolve:{onSuccess:()=>{var e,l,t;m(e=>!e),(null==u||null==(e=u.learningAttempt)?void 0:e.feedback)||h.push("/related-apps/kmis/my-topic/".concat(null==u||null==(t=u.learningAttempt)||null==(l=t.topic)?void 0:l.id,"?certificateSection=1"))}}})}});return(0,i.jsxs)(r.T,{p:4,gap:4,rounded:"xl",bg:"body",...x,children:[(0,i.jsxs)(r.T,{gap:1,children:[(0,i.jsx)(d.P,{fontSize:"lg",fontWeight:"semibold",children:"Feedback"}),(0,i.jsx)(d.P,{color:"fg.subtle",children:p.msg_input_feedback_to_get_course_certificate})]}),(0,i.jsx)("form",{id:"feedback",onSubmit:v.handleSubmit,children:(0,i.jsxs)(_.XO,{gap:4,children:[(0,i.jsx)(A.D,{label:(0,i.jsx)(d.P,{children:(0,T.zl)(p.feedback_question,{courseName:(null==u||null==(c=u.learningAttempt)||null==(a=c.topic)?void 0:a.title)||""})}),invalid:!!v.errors.feedback,errorText:v.errors.feedback,children:(0,i.jsx)(r.T,{gap:2,children:Array.from({length:5},(e,l)=>{var t;let r=(null==(t=v.values.feedback)?void 0:t.id)===l+1;return(0,i.jsx)(n.t,{clicky:!1,justifyContent:"start",variant:"outline",onClick:()=>{v.setFieldValue("feedback",{id:l+1,label:(0,T.Ds)(p,"feedback_label_".concat(l+1))})},children:(0,i.jsxs)(C.z,{justify:"start",w:"full",children:[(0,i.jsx)(d.P,{children:"".concat(l+1)}),(0,i.jsx)(d.P,{children:(0,T.Ds)(p,"feedback_label_".concat(l+1))}),r&&(0,i.jsx)(P.P3,{ml:"auto",mr:1})]})},l)})})}),(0,i.jsx)(A.D,{label:p.comment,invalid:!!v.errors.comment,errorText:v.errors.comment,children:(0,i.jsx)(z.T,{inputValue:v.values.comment,onChange:e=>{v.setFieldValue("comment",e)}})}),(0,i.jsx)(n.t,{type:"submit",form:"feedback",loading:g,colorPalette:"p",ml:"auto",children:"Submit"})]})})]})};var R=t(58832),F=t(30918),L=t(73457),M=t(66825),W=t(95145),B=t(86021),O=t(66168);let N=e=>{let{children:l,borderless:t=!1,...n}=e;return(0,i.jsx)(C.z,{borderBottom:"1px solid",borderColor:t?"transparent":"border.muted",justify:"space-between",wrap:"wrap",px:4,py:3,gap:4,...n,children:l})},H=e=>{let{children:l,...t}=e;return(0,i.jsx)(d.P,{fontWeight:"semibold",...t,children:l})};var V=t(54515);let K=e=>{let{quizAttempStatus:l,...t}=e,{l:n}=(0,w.A)(),r="",o="gray";switch(l){case 1:r=n.on_progress,o="orange";break;case 2:r=n.finished,o="green";break;default:r="Unknown",o="gray"}return(0,i.jsx)(V.Ex,{fontSize:"sm",colorPalette:o,...t,children:r})};var Q=t(77535),Y=t(92091),U=t(46845),Z=t(8898),X=t(49294),$=t(68595),G=t(12115);let J=e=>{var l,t,n;let{optionLetter:r,optionKey:o,quizResponse:s,...a}=e,c=r===(null==s||null==(l=s.quiz)?void 0:l.correctOption),u=r!==(null==s||null==(t=s.quiz)?void 0:t.correctOption)&&r===(null==s?void 0:s.selectedOption),x=(null==s?void 0:s.selectedOption)===r;return(0,i.jsxs)(C.z,{align:"start",justifyContent:"start",py:2,px:4,variant:"outline",border:"1px solid",borderColor:c?"border.success":u?"border.error":"border.muted",rounded:"lg",...a,children:[(0,i.jsx)(d.P,{children:r}),(0,i.jsx)(d.P,{children:null==s||null==(n=s.quiz)?void 0:n[o]}),x&&(0,i.jsx)(P.P3,{ml:"auto",mt:"6px"})]})},ee=e=>{var l,t,o,s,a;let{quizResponses:c,...u}=e,{l:x}=(0,w.A)(),[p,m]=(0,G.useState)(0),h=null==c||null==(l=c.exam)?void 0:l[p];return(0,i.jsxs)(Q.B,{flexDir:["column",null,"row"],gap:4,...u,children:[(0,i.jsxs)(j,{gap:2,p:4,border:"1px solid",borderColor:"border.muted",children:[(0,i.jsx)(d.P,{fontWeight:"semibold",children:"No. ".concat(p+1)}),(0,i.jsx)(d.P,{fontWeight:"medium",children:null==h||null==(t=h.quiz)?void 0:t.question}),(0,i.jsx)(r.T,{gap:2,mt:2,children:[{optionLetter:"A",optionKey:"answerA"},{optionLetter:"B",optionKey:"answerB"},{optionLetter:"C",optionKey:"answerC"},{optionLetter:"D",optionKey:"answerD"}].map(e=>{let{optionLetter:l,optionKey:t}=e;return(0,i.jsx)(J,{optionLetter:l,optionKey:t,quizResponse:h},t)})}),(0,i.jsxs)(C.z,{align:"start",color:"fg.muted",mt:4,px:1,children:[(0,i.jsx)(d.P,{flexShrink:0,children:x.explanation}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(null==h||null==(o=h.quiz)?void 0:o.explanation)||"-"})]}),(0,i.jsxs)(C.z,{mt:4,justify:"end",children:[(0,i.jsxs)(n.t,{variant:"ghost",disabled:0===p,onClick:()=>{m(e=>e-1)},children:[(0,i.jsx)(Y.I,{children:(0,i.jsx)(X.A,{stroke:1.5})}),x.previous]}),(0,i.jsxs)(n.t,{variant:"ghost",disabled:c&&p===(null==c||null==(s=c.exam)?void 0:s.length)-1,onClick:()=>{m(e=>e+1)},children:[x.next,(0,i.jsx)(Y.I,{children:(0,i.jsx)($.A,{stroke:1.5})})]})]})]}),(0,i.jsxs)(j,{w:["full",null,"fit"],h:"fit",gap:4,p:4,border:"1px solid",borderColor:"border.muted",children:[(0,i.jsx)(d.P,{fontWeight:"semibold",children:x.list_of_questions}),(0,i.jsx)(U.r,{columns:5,gap:2,w:"max",children:null==c||null==(a=c.exam)?void 0:a.map((e,l)=>{let t=p===l,r=e.isCorrect,o=!!e.selectedOption;return(0,i.jsx)(n.t,{iconButton:!0,size:"xs",variant:"outline",bg:o?r?"p.400":"fg.error":"",color:o?"white":"",border:"1px solid",borderColor:"body",boxShadow:t?"0 0 0 2px {colors.p.400}":"",onClick:()=>m(l),children:l+1},l)})}),(0,i.jsxs)(r.T,{gap:2,px:"2px",children:[(0,i.jsxs)(C.z,{children:[(0,i.jsx)(Z.a,{w:"12px",aspectRatio:1,bg:"fg.success",border:"1px solid",borderColor:"fg.success",rounded:"xs"}),(0,i.jsx)(d.P,{children:x.correct_answer})]}),(0,i.jsxs)(C.z,{children:[(0,i.jsx)(Z.a,{w:"12px",aspectRatio:1,bg:"fg.error",border:"1px solid",borderColor:"fg.error",rounded:"xs"}),(0,i.jsx)(d.P,{children:x.wrong_answer})]}),(0,i.jsxs)(C.z,{children:[(0,i.jsx)(Z.a,{w:"12px",aspectRatio:1,bg:"bg.subtle",border:"1px solid",borderColor:"fg.subtle",rounded:"xs"}),(0,i.jsx)(d.P,{children:x.not_answered})]})]})]})]})};var el=t(7945),et=t(3370),ei=t(35189),en=t(60439),er=t(32309),eo=t(46977),es=t(86487),ea=t(50857),ed=t(19971),ec=t(7951),eu=t(83256),ex=t(68034);let ep=e=>{var l,t;let{quizNumber:n,activeQuiz:r,topicDetail:o,optionLetter:s,optionKey:a,...c}=e,{l:u}=(0,w.A)(),x=(0,y.A)(e=>e.setRt),{req:p}=(0,S.A)({id:"update-answer-".concat(null==(l=r.quiz)?void 0:l.id),loadingMessage:{title:(0,T.zl)(u.loading_answer.title,{quizNumber:n}),description:(0,T.zl)(u.loading_answer.description,{quizNumber:n})},successMessage:{title:(0,T.zl)(u.success_answer.title,{quizNumber:n}),description:(0,T.zl)(u.success_answer.description,{quizNumber:n})}}),m=r.quiz,h=(null==r?void 0:r.selectedOption)===s;return(0,i.jsxs)(C.z,{align:"start",py:2,px:4,border:"1px solid",borderColor:h?"p.500":"border.muted",onClick:(null==o||null==(t=o.learningAttempt)?void 0:t.quizFinished)?()=>{}:function(){var e;p({config:{url:"/api/kmis/exam/create",method:"POST",data:{learningAttemptId:null==o||null==(e=o.learningAttempt)?void 0:e.id,quizId:null==m?void 0:m.id,selectedOption:s||"",isMarker:!!r.isMarker}},onResolve:{onSuccess:()=>{x(e=>!e)},onError:()=>{}}})},rounded:"lg",cursor:"pointer",transition:"200ms",_hover:{bg:"d0"},...c,children:[(0,i.jsx)(d.P,{children:s}),(0,i.jsx)(d.P,{children:null==m?void 0:m[a]}),h&&(0,i.jsx)(P.P3,{ml:"auto",mt:"6px"})]})},em=e=>{var l;let{topicDetail:t,activeQuiz:n,quizNumber:r}=e,{l:o}=(0,w.A)(),s=(0,y.A)(e=>e.setRt),{req:a}=(0,S.A)({id:"marking-question",successMessage:{title:(0,T.zl)(o.success_answer.title,{quizNumber:r})}});return(0,i.jsx)(L.S,{colorPalette:"p",checked:null==n?void 0:n.isMarker,onCheckedChange:function(){var e,l;a({config:{url:"/api/kmis/exam/create",method:"POST",data:{learningAttemptId:null==t||null==(e=t.learningAttempt)?void 0:e.id,quizId:null==n||null==(l=n.quiz)?void 0:l.id,selectedOption:(null==n?void 0:n.selectedOption)||"",isMarker:!(null==n?void 0:n.isMarker)}},onResolve:{onSuccess:()=>{s(e=>!e)},onError:()=>{}}})},disabled:!!(null==t||null==(l=t.learningAttempt)?void 0:l.quizFinished),children:o.marked})},eh=e=>{var l;let{topicDetail:t,...r}=e,{l:o}=(0,w.A)(),s=(0,y.A)(e=>e.setRt),{setConfirmationData:a,confirmationOnOpen:d}=(0,el.A)(),{req:c}=(0,S.A)({id:"submit-quiz"}),u=(0,E.useRouter)();function x(){var e;(0,er.aX)(),c({config:{url:"/api/kmis/exam/submit-answer",method:"POST",data:{learningAttemptId:null==t||null==(e=t.learningAttempt)?void 0:e.id}},onResolve:{onSuccess:()=>{var e;s(e=>!e),u.push("/related-apps/kmis/my-topic/".concat(null==t||null==(e=t.learningAttempt)?void 0:e.topic.id,"?feedbackSession=1"))}}})}return(0,i.jsxs)(n.t,{variant:"subtle",colorPalette:"p",onClick:()=>{a({title:"Submit",description:o.msg_cross_check_before_submit,confirmLabel:"Submit",onConfirm:x}),d()},disabled:!!(null==t||null==(l=t.learningAttempt)?void 0:l.quizFinished),...r,children:["Submit",(0,i.jsx)(Y.I,{children:(0,i.jsx)($.A,{stroke:1.5})})]})},ej=e=>{let{topicDetail:l,exams:t,activeQuiz:o,activeQuizIdx:s,setActiveQuizIdx:a}=e,{l:c}=(0,w.A)(),u=null==o?void 0:o.quiz,x=s===(null==t?void 0:t.length)-1;return(0,i.jsx)(r.T,{flex:4,gap:4,children:(0,i.jsxs)(j,{gap:2,p:4,children:[(0,i.jsx)(d.P,{fontWeight:"semibold",color:"fg.subtle",children:"No. ".concat(s+1)}),(0,i.jsx)(d.P,{fontWeight:"medium",children:null==u?void 0:u.question}),(0,i.jsx)(r.T,{gap:2,mt:2,children:[{optionLetter:"A",optionKey:"answerA"},{optionLetter:"B",optionKey:"answerB"},{optionLetter:"C",optionKey:"answerC"},{optionLetter:"D",optionKey:"answerD"}].map(e=>{let{optionLetter:t,optionKey:n}=e;return(0,i.jsx)(ep,{quizNumber:s+1,topicDetail:l,optionLetter:t,optionKey:n,activeQuiz:o},n)})}),(0,i.jsxs)(C.z,{wrap:"wrap",mt:4,justify:"space-between",children:[(0,i.jsx)(em,{topicDetail:l,activeQuiz:o,quizNumber:s+1}),(0,i.jsxs)(C.z,{flex:[1,null,0],children:[(0,i.jsxs)(n.t,{w:["",null,"150px"],flex:1,variant:"ghost",disabled:0===s,onClick:()=>{a(e=>e-1)},children:[(0,i.jsx)(Y.I,{children:(0,i.jsx)(X.A,{stroke:1.5})}),c.previous]}),x&&(0,i.jsx)(eh,{topicDetail:l,w:["",null,"150px"],flex:1}),!x&&(0,i.jsxs)(n.t,{w:["",null,"150px"],flex:1,variant:"ghost",colorPalette:"",onClick:()=>{a(e=>e+1)},children:[c.next,(0,i.jsx)(Y.I,{children:(0,i.jsx)($.A,{stroke:1.5})})]})]})]})]})})},eg=e=>{var l;let{quizTimeEndedAutomaticallyAt:t,quizTimeStartedAt:n,topicDetail:r,...o}=e,s=(0,y.A)(e=>e.setRt),{req:a}=(0,S.A)({id:"running-out-of-time-auto-submit"}),c=(0,E.useRouter)(),u=!!(null==r||null==(l=r.learningAttempt)?void 0:l.quizFinished),[x,p]=(0,G.useState)((0,es.Cn)(t)),m=(0,eo.a3)(x,"digital");return(0,G.useEffect)(()=>{let e=setInterval(()=>{p(l=>{let t=l-1;return t<=0?(clearInterval(e),!u&&n&&function(){var e;a({config:{url:"/api/kmis/exam/submit-answer",method:"POST",data:{learningAttemptId:null==r||null==(e=r.learningAttempt)?void 0:e.id}},onResolve:{onSuccess:()=>{s(e=>!e),c.push("/related-apps/kmis/my-topic/".concat(null==r?void 0:r.learningAttempt.id,"?feedbackSession=1"))}}})}(),0):t})},1e3);return()=>clearInterval(e)},[t]),(0,i.jsxs)(C.z,{gap:1,h:"40px",pl:3,pr:4,bg:"blue.100",rounded:"xl",justify:"space-between",color:"blue.500",...o,children:[(0,i.jsx)(Y.I,{boxSize:5,children:(0,i.jsx)(ec.A,{})}),(0,i.jsx)(d.P,{fontSize:"lg",fontWeight:"semibold",children:m})]})},ev=e=>{var l,t,o,s,c,u;let{topicDetail:x,...p}=e,{l:m}=(0,w.A)(),{themeConfig:g}=(0,h.p)(),{open:f,onOpen:A,onClose:z}=(0,ea.j)();(0,et.A)("answer-review-".concat(null==x||null==(l=x.learningAttempt)?void 0:l.id),f,A,z);let{error:P,initialLoading:y,data:S,onRetry:_}=(0,ei.A)({initialData:void 0,url:"/api/kmis/learning-course/get-finished-attempt/".concat(null==x||null==(t=x.learningAttempt)?void 0:t.id),dependencies:[f],conditions:f,dataResource:!1}),q=null==S?void 0:S.learningParticipant,E={loading:(0,i.jsx)(ed.EA,{w:"full",h:"400px"}),error:(0,i.jsx)(k.A,{onRetry:_,h:"400px"}),empty:(0,i.jsx)(b.A,{h:"400px"}),loaded:(0,i.jsxs)(r.T,{gap:4,children:[(0,i.jsxs)(U.r,{columns:[1,null,2],gap:4,px:1,children:[(0,i.jsxs)(j,{rounded:g.radii.component,border:"1px solid",borderColor:"border.muted",children:[(0,i.jsx)(N,{borderless:!0,children:(0,i.jsx)(H,{children:(0,T.kR)(m.basic_info)})}),(0,i.jsxs)(r.T,{gap:4,p:4,pt:2,children:[(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.name}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(O.v,{children:null==q?void 0:q.attemptUser.name})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:"Email"}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(O.v,{children:null==q?void 0:q.attemptUser.email})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.course_category}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(O.v,{children:null==q?void 0:q.topic.category.title})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:"Course"}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(O.v,{children:null==q?void 0:q.topic.title})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.description}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(O.v,{children:null==q?void 0:q.topic.description})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.duration}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(0,eo.a3)(null==q?void 0:q.topic.quizDuration)})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.start_date_time}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(0,eo.Yq)(null==q?void 0:q.quizStarted,{variant:"numeric",withTime:!0})})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.end_date_time}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(0,eo.Yq)(null==q?void 0:q.quizFinished,{variant:"numeric",withTime:!0})})]})]})]}),(0,i.jsxs)(j,{rounded:g.radii.component,border:"1px solid",borderColor:"border.muted",children:[(0,i.jsx)(N,{borderless:!0,children:(0,i.jsx)(H,{children:(0,T.kR)(m.quiz_info)})}),(0,i.jsxs)(r.T,{gap:4,p:4,pt:2,children:[(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.progress_status}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(K,{quizAttempStatus:null==q?void 0:q.attemptStatus})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.grade}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:"".concat(null==q?void 0:q.scoreTotal)})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.total_answered}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(0,eo.ZV)((null==q?void 0:q.questionsAnswered)||0)})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.total_correct}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(0,eo.ZV)(null==q?void 0:q.correctCount)})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.total_wrong}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(0,eo.ZV)(null==q?void 0:q.wrongCount)})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.total_empty}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(0,eo.ZV)(null==q?void 0:q.emptyCount)})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:"Rating"}),(0,i.jsx)(d.P,{children:":"}),(null==q?void 0:q.feedback)?(0,i.jsx)(C.z,{gap:1,children:Array.from({length:null==q?void 0:q.feedback},(e,l)=>(0,i.jsx)(Y.I,{color:"yellow.500",boxSize:5,children:(0,i.jsx)(eu.A,{})},l))}):"-"," "]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:"Feedback"}),(0,i.jsx)(d.P,{children:":"}),(0,i.jsx)(d.P,{children:(null==q?void 0:q.feedbackComment)||"-"})]}),(0,i.jsxs)(C.z,{align:"start",children:[(0,i.jsx)(d.P,{w:"120px",color:"fg.muted",flexShrink:0,children:m.certificate}),(0,i.jsx)(d.P,{children:":"}),!(null==x||null==(o=x.learningAttempt)?void 0:o.feedback)&&(0,i.jsx)(d.P,{children:"-"}),(null==x||null==(s=x.learningAttempt)?void 0:s.feedback)&&(0,i.jsx)(a.k,{to:(0,v.iw)(null==q||null==(u=q.certificate)||null==(c=u[0])?void 0:c.filePath),external:!0,children:(0,i.jsxs)(n.t,{variant:"plain",p:0,h:"fit",color:"".concat(g.colorPalette,".fg"),children:[m.view,(0,i.jsx)(Y.I,{boxSize:5,children:(0,i.jsx)(ex.A,{stroke:1.5})})]})})]})]})]})]}),(0,i.jsx)(ee,{quizResponses:S,px:1})]})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.t,{colorPalette:"p",onClick:A,...p,children:m.answer_review}),(0,i.jsx)(M.i0,{open:f,lazyLoad:!0,size:"xl",children:(0,i.jsxs)(M.L7,{children:[(0,i.jsx)(M.$Z,{children:(0,i.jsx)(W.G,{title:m.answer_review})}),(0,i.jsxs)(M.Ql,{children:[y&&E.loading,!y&&(0,i.jsxs)(i.Fragment,{children:[P&&E.error,!P&&(0,i.jsxs)(i.Fragment,{children:[S&&E.loaded,!S&&E.empty]})]})]}),(0,i.jsx)(M.PK,{children:(0,i.jsx)(B.A,{})})]})})]})},ef=e=>{var l,t,o,s,a;let{data:c,topicDetail:u,activeQuizIdx:x,setActiveQuizIdx:p,...m}=e,{l:h}=(0,w.A)(),g=null==c?void 0:c.exam,v=(null==c?void 0:c.learningParticipant)||(null==c?void 0:c.learningAttempt),f=null==u||null==(t=u.learningAttempt)||null==(l=t.topic)?void 0:l.quizDuration,b=(0,es.oA)(null==v?void 0:v.quizStarted),k=(0,es.HZ)(null==v?void 0:v.quizStarted,f),A=(0,es.Tj)(b,f),z=null==u||null==(o=u.learningAttempt)?void 0:o.quizFinished,P=(0,es.oA)(null==u||null==(s=u.learningAttempt)?void 0:s.quizFinished),y=!!(null==u||null==(a=u.learningAttempt)?void 0:a.quizFinished);return(0,i.jsxs)(r.T,{flex:1,gap:4,...m,children:[(0,i.jsxs)(i.Fragment,{children:[y&&(0,i.jsx)(ev,{topicDetail:u}),!y&&(0,i.jsx)(eg,{quizTimeStartedAt:b,quizTimeEndedAutomaticallyAt:A,quizTimeEndedAt:P,topicDetail:u})]}),(0,i.jsxs)(j,{h:"fit",gap:4,p:4,children:[(0,i.jsx)(d.P,{fontWeight:"semibold",children:h.list_of_questions}),(0,i.jsx)(U.r,{columns:5,gap:2,w:"max",children:null==g?void 0:g.map((e,l)=>{let t=x===l,r=!!(null==e?void 0:e.selectedOption),o=!!(null==e?void 0:e.isMarker);return(0,i.jsx)(n.t,{iconButton:!0,size:"xs",variant:"outline",border:"1px solid",borderColor:"border.muted",boxShadow:t?"0 0 0 2px {colors.p.400}":"",bg:o?"orange.400":r?"p.400":"",color:o||r?"light":"",onClick:()=>p(l),children:l+1},l)})}),(0,i.jsxs)(r.T,{gap:2,px:"2px",children:[(0,i.jsxs)(C.z,{children:[(0,i.jsx)(Z.a,{w:"12px",aspectRatio:1,bg:"p.400",rounded:"xs"}),(0,i.jsx)(d.P,{children:h.answered})]}),(0,i.jsxs)(C.z,{children:[(0,i.jsx)(Z.a,{w:"12px",aspectRatio:1,bg:"orange.400",rounded:"xs"}),(0,i.jsx)(d.P,{children:h.marked})]})]})]}),(0,i.jsxs)(j,{gap:4,p:4,children:[(0,i.jsxs)(r.T,{justify:"space-between",gap:1,children:[(0,i.jsx)(d.P,{color:"fg.subtle",children:h.started_at}),(0,i.jsx)(d.P,{children:(0,eo.Yq)(null==v?void 0:v.quizStarted,{variant:"dayShortMonthYear",withTime:!0})||"-"})]}),(0,i.jsxs)(r.T,{justify:"space-between",gap:1,children:[(0,i.jsx)(d.P,{color:"fg.subtle",children:h.ended_automatically_at}),(0,i.jsx)(d.P,{children:(0,eo.Yq)(k,{variant:"dayShortMonthYear",withTime:!0})||"-"})]}),(0,i.jsxs)(r.T,{justify:"space-between",gap:1,children:[(0,i.jsx)(d.P,{color:"fg.subtle",children:h.ended_at}),(0,i.jsx)(d.P,{children:(0,eo.Yq)(z,{variant:"dayShortMonthYear",withTime:!0})||"-"})]})]})]})},eb=e=>{var l,t,o,s,a,c;let{topicDetail:u,...x}=e,{l:p}=(0,w.A)(),[m,h]=(0,G.useState)(!!(null==u||null==(l=u.learningAttempt)?void 0:l.quizStarted)),[g,v]=(0,G.useState)(0),{error:f,initialLoading:A,data:z,onRetry:P}=(0,ei.A)({url:"/api/kmis/learning-course/get-quiz-with-answer/".concat(null==u||null==(t=u.learningAttempt)?void 0:t.id),dependencies:[],conditions:m,dataResource:!1}),y=null==z?void 0:z.exam,S=null==y?void 0:y[g];console.debug({exams:y,activeQuizIdx:g,activeQuiz:S});let T={loading:(0,i.jsx)(ed.EA,{flex:1,rounded:"xl"}),error:(0,i.jsx)(k.A,{onRetry:P}),empty:(0,i.jsx)(b.A,{}),loaded:(0,i.jsxs)(Q.B,{flexDir:["column",null,"row"],gap:4,...x,children:[(0,i.jsx)(ej,{topicDetail:u,exams:y,activeQuiz:S,activeQuizIdx:g,setActiveQuizIdx:v}),(0,i.jsx)(ef,{topicDetail:u,data:z,activeQuizIdx:g,setActiveQuizIdx:v})]})};return(0,i.jsxs)(r.T,{flex:1,children:[m&&(0,i.jsxs)(i.Fragment,{children:[A&&T.loading,!A&&(0,i.jsxs)(i.Fragment,{children:[f&&T.error,!f&&(0,i.jsxs)(i.Fragment,{children:[z&&T.loaded,(!z||(0,en.VP)(y))&&T.empty]})]})]}),!m&&(0,i.jsxs)(j,{rounded:"xl",flex:1,p:4,justify:"center",align:"center",children:[(0,i.jsx)(d.P,{fontSize:"lg",fontWeight:"medium",textAlign:"center",children:"".concat((0,eo.ZV)(null==u||null==(s=u.learningAttempt)||null==(o=s.topic)?void 0:o.totalQuiz)," quiz / ").concat(((null==u||null==(c=u.learningAttempt)||null==(a=c.topic)?void 0:a.quizDuration)||0)/60," ").concat(p.minutes)}),(0,i.jsx)(n.t,{w:"140px",colorPalette:"p",size:"lg",onClick:()=>{h(!0)},mt:4,children:"Start Quiz"})]})]})};var ek=t(68959);let eA=async e=>{try{await (null==e?void 0:e.play())}catch(e){}},ez=(e,l)=>{e&&e.duration&&!isNaN(e.duration)&&(e.currentTime=Math.min(Math.max(l,0),e.duration))},eP=(e,l)=>{e&&(e.volume=Math.min(Math.max(l,0),1))},ew=(e,l)=>{e&&(e.muted="boolean"==typeof l?l:!e.muted)},ey=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((t,i)=>{let n=document.createElement("video");n.src=e,n.crossOrigin="anonymous",n.addEventListener("loadeddata",()=>{n.currentTime=l}),n.addEventListener("seeked",()=>{let e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight;let l=e.getContext("2d");if(!l)return i("Canvas context error");l.drawImage(n,0,0,e.width,e.height),t(e.toDataURL("image/jpeg"))}),n.addEventListener("error",e=>i(e))})};var eS=t(74474),eT=t(94458),e_=t(11856),eC=t(34293),eq=t(18581),eE=t(56193),eI=t(92645),eD=t(58083),eR=t(47562),eF=t(76850);let eL=(0,eS.B)("video");function eM(e){let{id:l,thumbnail:t,src:o,embedYt:s,...a}=e,c=(0,G.useRef)(null),u=(0,G.useRef)(null),x=(0,G.useRef)(null),[p,m]=(0,G.useState)(t||""),[h,j]=(0,G.useState)(!1),[g,v]=(0,G.useState)(!1),[f,b]=(0,G.useState)(0),[k,A]=(0,G.useState)(0),[z,P]=(0,G.useState)(100),[w,y]=(0,G.useState)(!1),[S,T]=(0,G.useState)(1),_=[{label:"0.5x",value:"0.5"},{label:"1x",value:"1"},{label:"1.5x",value:"1.5"},{label:"2x",value:"2"}],q=e=>{if(!e)return"0:00";let l=Math.floor(e/60),t=Math.floor(e%60).toString().padStart(2,"0");return"".concat(l,":").concat(t)};function E(){let e=u.current;if(e)if(g)null==e||e.pause(),v(!1);else eA(e),v(!0)}function I(){let e=u.current;e&&(ez(e,f+5),b(f+5))}function D(){let e=u.current;e&&(ez(e,f-5),b(f-5))}function R(){let e=c.current;e&&function(e){if(!e)return;let l=()=>{document.fullscreenElement||(e.scrollIntoView({block:"center"}),document.removeEventListener("fullscreenchange",l))};document.addEventListener("fullscreenchange",l),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitEnterFullscreen&&e.webkitEnterFullscreen()}(e)}return((0,G.useEffect)(()=>{t||(async()=>{m(await ey(o||"",1))})()},[t]),(0,G.useEffect)(()=>{let e=(e=>{let l=(0,er.c7)("video-progress:".concat(e));return l?Number(l):0})("video-progress:".concat(l));ez(u.current,e)},[l]),(0,G.useEffect)(()=>{let e=u.current;if(!e)return;let l=()=>A(e&&!isNaN(e.duration)?e.duration:0);return e.addEventListener("loadedmetadata",l),()=>e.removeEventListener("loadedmetadata",l)},[]),(0,G.useEffect)(()=>{let e=setInterval(()=>{if(u.current){var e,t,i;let n=null!=(t=null==(e=u.current)?void 0:e.currentTime)?t:0;b(n),i="video-progress:".concat(l),(0,er.cT)("video-progress:".concat(i),String(n))}},1e3);return()=>clearInterval(e)},[l]),(0,G.useEffect)(()=>{let e=e=>{if(c.current&&c.current.contains(document.activeElement))switch(e.code){case"Space":e.preventDefault(),E();break;case"ArrowRight":e.preventDefault(),I();break;case"ArrowLeft":e.preventDefault(),D()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,g]),(0,ek.A)([c],()=>j(!1)),(0,G.useEffect)(()=>{let e=u.current;if(!e)return;let l=()=>v(!1);return e.addEventListener("ended",l),()=>e.removeEventListener("ended",l)},[]),(0,G.useEffect)(()=>{let e=c.current;if(!e)return;let l=()=>{j(!0),e.style.cursor="default",x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{j(!1),e.style.cursor="none",x.current=null},3e3)};return e.addEventListener("mousemove",l),e.addEventListener("click",l),e.addEventListener("touchstart",l),l(),()=>{e.removeEventListener("mousemove",l),e.removeEventListener("click",l),e.removeEventListener("touchstart",l),x.current&&clearTimeout(x.current)}},[]),s)?(0,i.jsx)(r.T,{w:"full",h:"auto",aspectRatio:1.6,children:(0,i.jsx)("iframe",{src:o,width:"100%",height:"100%",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,i.jsxs)(r.T,{ref:c,justify:"center",align:"center",mx:"auto",pos:"relative",overflow:"clip",aspectRatio:1.6,bg:"black",...a,children:[(0,i.jsx)(eL,{as:"video",ref:u,src:o,poster:p,w:"full",shadow:"md",onClick:()=>{h?E():j(!0)},onDoubleClick:R}),(0,i.jsxs)(r.T,{w:"full",className:"dsb",pos:"absolute",left:0,transition:"500ms",bottom:0,visibility:h?"visible":"hidden",opacity:+!!h,children:[(0,i.jsx)(C.z,{mt:"-5px",children:(0,i.jsx)(eT.g1,{flex:1,min:0,max:k,step:1,size:"sm",value:[f],onValueChange:function(e){let l=u.current;l&&(ez(l,e.value),b(e.value))},colorPalette:"light",children:(0,i.jsxs)(eT.XB,{children:[(0,i.jsx)(eT.hB,{rounded:0,bg:"dark",children:(0,i.jsx)(eT.tO,{rounded:0})}),(0,i.jsx)(eT.RY,{w:"10px",h:"10px",bg:"dark"})]})})}),(0,i.jsxs)(Q.B,{flexDir:["column",null,"row"],gap:0,pb:1,px:1,justify:"space-between",children:[(0,i.jsxs)(C.z,{justify:"space-between",children:[(0,i.jsxs)(C.z,{children:[(0,i.jsx)(n.t,{iconButton:!0,clicky:!1,size:"md",colorPalette:"light",variant:"plain",onClick:E,children:(0,i.jsx)(Y.I,{children:g?(0,i.jsx)(eC.A,{stroke:1.5}):(0,i.jsx)(eq.A,{stroke:1.5})})}),(0,i.jsxs)(e_.E,{fontSize:"sm",textAlign:"right",flexShrink:0,children:[q(f)," / ",q(k)]})]}),(0,i.jsx)(n.t,{clicky:!1,size:"md",colorPalette:"light",variant:"plain",onClick:function(){var e;let l=u.current;if(!l)return;let t=(_.findIndex(e=>parseFloat(e.value)===S)+1)%_.length,i=_[t];e=parseFloat(i.value),l&&(l.playbackRate=e),T(parseFloat(i.value))},px:2,children:(0,i.jsx)(d.P,{fontSize:"sm",children:"".concat(S,"x")})})]}),(0,i.jsxs)(C.z,{justify:"space-between",children:[(0,i.jsxs)(C.z,{gap:0,children:[(0,i.jsxs)(n.t,{clicky:!1,size:"md",colorPalette:"light",variant:"plain",onClick:D,px:2,children:[(0,i.jsx)(d.P,{fontSize:"sm",children:"5"}),(0,i.jsx)(Y.I,{children:(0,i.jsx)(eE.A,{stroke:1.5})})]}),(0,i.jsxs)(n.t,{clicky:!1,size:"md",colorPalette:"light",variant:"plain",onClick:I,px:2,children:[(0,i.jsx)(Y.I,{children:(0,i.jsx)(eI.A,{stroke:1.5})}),(0,i.jsx)(d.P,{fontSize:"sm",children:"5"})]})]}),(0,i.jsxs)(C.z,{children:[(0,i.jsxs)(C.z,{children:[(0,i.jsx)(n.t,{iconButton:!0,clicky:!1,size:"md",variant:"plain",onClick:function(){let e=u.current;e&&(ew(e),y(!w),!1==!w&&z/100==0&&(eP(e,1),P(100)))},colorPalette:"light",mr:"-10px",children:(0,i.jsx)(Y.I,{children:w||0===z?(0,i.jsx)(eD.A,{stroke:1.5}):(0,i.jsx)(eR.A,{stroke:1.5})})}),(0,i.jsx)(eT.g1,{w:"60px",min:0,max:100,step:1,size:"sm",colorPalette:"light",value:[z],onValueChange:function(e){let l=u.current;l&&(eP(l,e.value/100),P(e.value),e.value/100==0?(y(!0),ew(l,!0)):(y(!1),ew(l,!1)))},children:(0,i.jsxs)(eT.XB,{children:[(0,i.jsx)(eT.hB,{bg:"dark",children:(0,i.jsx)(eT.tO,{})}),(0,i.jsx)(eT.RY,{w:"10px",h:"10px",bg:"dark"})]})})]}),(0,i.jsx)(n.t,{iconButton:!0,clicky:!1,size:"md",colorPalette:"light",variant:"plain",onClick:R,children:(0,i.jsx)(eF.A,{stroke:1.5})})]})]})]})]})]})}var eW=t(7579),eB=t(27559),eO=t(43643),eN=t(43055),eH=t(79350),eV=t(51645),eK=t(34028),eQ=t(54943),eY=t(92060),eU=t(84528),eZ=t(32548);let eX={text:{icon:(0,i.jsx)(eB.A,{stroke:1.5}),type:"Text",minimalStudyTime:5,render:e=>{let{material:l,...t}=e;return(0,i.jsxs)(r.T,{gap:4,p:4,rounded:"xl",bg:"body",...t,children:[(0,i.jsx)(d.P,{fontSize:"xl",fontWeight:"semibold",children:l.title}),(0,i.jsx)(r.T,{children:(0,i.jsx)(x,{html:null==l?void 0:l.description})})]})}},video:{icon:(0,i.jsx)(eO.A,{stroke:1.5}),type:"Video",minimalStudyTime:15,render:e=>{let{material:l,...t}=e;return(0,i.jsxs)(r.T,{gap:4,p:4,rounded:"xl",bg:"body",...t,children:[(0,i.jsx)(d.P,{fontSize:"xl",fontWeight:"semibold",children:l.title}),(0,i.jsxs)(r.T,{gap:4,children:[(0,i.jsx)(eM,{embedYt:!0,src:null==l?void 0:l.materialUrl}),(0,i.jsx)(x,{html:null==l?void 0:l.description})]})]})}},dokumen:{icon:(0,i.jsx)(eN.A,{stroke:1.5}),type:"Document",minimalStudyTime:7,render:e=>{var l;let{material:t,...n}=e;return(0,i.jsxs)(r.T,{gap:4,rounded:"xl",bg:"body",...n,children:[(0,i.jsx)(r.T,{p:4,pb:0,children:(0,i.jsx)(d.P,{fontSize:"xl",fontWeight:"semibold",children:t.title})}),(0,i.jsxs)(r.T,{overflow:"clip",children:[null==t||null==(l=t.materialFiles)?void 0:l.map(e=>(0,i.jsx)(g.T,{fileUrl:(0,v.iw)(null==e?void 0:e.filePath),maxH:"700px"},e.id)),(0,i.jsx)(r.T,{p:4,children:(0,i.jsx)(x,{html:null==t?void 0:t.description})})]})]})}},gambar:{icon:(0,i.jsx)(eH.A,{stroke:1.5}),type:"Image",minimalStudyTime:5,render:e=>{var l;let{material:t,...n}=e;return(0,i.jsxs)(r.T,{gap:4,p:4,rounded:"xl",bg:"body",...n,children:[(0,i.jsx)(d.P,{fontSize:"xl",fontWeight:"semibold",children:t.title}),(0,i.jsxs)(r.T,{gap:4,children:[null==t||null==(l=t.materialFiles)?void 0:l.map(e=>{let l=(0,v.JU)(e.filePath);return(0,i.jsx)(s.E,{fluid:!0,w:"full",src:l,imageProps:{unoptimized:!0}},l)}),(0,i.jsx)(x,{html:null==t?void 0:t.description})]})]})}}},e$=e=>{let{children:l,...t}=e;return(0,i.jsx)(n.t,{justifyContent:"start",textAlign:"left",gap:4,p:2,h:"55px",rounded:"lg",variant:"ghost",...t,children:l})},eG=e=>{var l,t,n,s,c,u,x,p,h,j,g,v,f,b,k,A,z,y,S,T,_,C,q;let{topicDetail:I,isPublicTopic:D,...R}=e,{l:F}=(0,w.A)(),L=(0,E.useSearchParams)(),M=L.get("activeMaterialId")||"",W=L.get("quizStarted")||"",B=L.get("feedbackSession")||"",O=L.get("certificateSection")||"",N=!!(null==I||null==(l=I.learningAttempt)?void 0:l.quizFinished),H=!!(null==I||null==(t=I.learningAttempt)?void 0:t.feedback),V=null!=(_=null==I||null==(n=I.learningAttempt)?void 0:n.completedMaterial)?_:[],K=null==I?void 0:I.material;return(0,i.jsxs)(r.T,{bg:"body",rounded:"xl",...R,children:[(0,i.jsxs)(r.T,{p:4,gap:1,children:[(0,i.jsx)(d.P,{fontWeight:"medium",children:F.learning_material}),(0,i.jsx)(d.P,{fontSize:"sm",color:"fg.subtle",children:"".concat(null!=(C=null==I?void 0:I.totalMaterial)?C:null==I||null==(s=I.learningAttempt)?void 0:s.totalMaterial," ").concat(null==(c=F.learning_material)?void 0:c.toLowerCase())})]}),(0,i.jsxs)(r.T,{gap:1,px:2,pb:2,children:[(0,en.VP)(K)&&(0,i.jsx)(eU.A,{}),null==K?void 0:K.map((e,l)=>{var t,n,o,s;let c=eX[(null==e?void 0:e.materialType)||"text"],u=M===e.id,x=new Set(V.map(e=>e.id));return(0,i.jsx)(a.k,{to:"/related-apps/kmis/my-topic/".concat((null==I||null==(n=I.learningAttempt)||null==(t=n.topic)?void 0:t.id)||(null==I||null==(o=I.topic)?void 0:o.id),"?activeMaterialId=").concat(e.id).concat(D?"&isPublic=1":""),w:"full",children:(0,i.jsxs)(e$,{disabled:0!==l&&!D&&!x.has(null==(s=K[l-1])?void 0:s.id),children:[(0,i.jsxs)(eW.o,{pos:"relative",children:[(null==e?void 0:e.isCompleted)&&(0,i.jsx)(P.D8,{}),(null==c?void 0:c.icon)&&(0,i.jsx)(Y.I,{boxSize:6,children:(null==c?void 0:c.icon)||(0,i.jsx)(eB.A,{stroke:1.5})})]}),(0,i.jsxs)(r.T,{children:[(0,i.jsx)(m.m,{content:e.title,children:(0,i.jsx)(d.P,{w:"full",fontWeight:"medium",lineClamp:1,children:e.title})}),(0,i.jsx)(d.P,{fontSize:"sm",color:"fg.subtle",children:null==c?void 0:c.type})]}),u&&(0,i.jsx)(P.P3,{ml:"auto",mr:1})]})},e.id)}),!D&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.c,{my:1}),(0,i.jsx)(a.k,{to:"/related-apps/kmis/my-topic/".concat(null==I||null==(x=I.learningAttempt)||null==(u=x.topic)?void 0:u.id,"?quizStarted=1"),w:"full",children:(0,i.jsxs)(e$,{disabled:V.length!==K.length||(null==I||null==(h=I.learningAttempt)||null==(p=h.topic)?void 0:p.totalQuiz)===0,children:[(0,i.jsxs)(eW.o,{pos:"relative",children:[N&&(0,i.jsx)(P.D8,{}),(0,i.jsx)(Y.I,{boxSize:6,children:(0,i.jsx)(eV.A,{stroke:1.5})})]}),(0,i.jsxs)(r.T,{children:[(0,i.jsx)(d.P,{fontWeight:"medium",children:"Quiz"}),(0,i.jsx)(d.P,{fontSize:"sm",color:"fg.subtle",children:"".concat(null==I||null==(g=I.learningAttempt)||null==(j=g.topic)?void 0:j.totalQuiz," quiz / ").concat((null==I||null==(f=I.learningAttempt)||null==(v=f.topic)?void 0:v.quizDuration)/60," ").concat(F.minutes)})]}),W&&(0,i.jsx)(P.P3,{ml:"auto",mr:1})]})}),(0,i.jsx)(a.k,{to:"/related-apps/kmis/my-topic/".concat(null==I||null==(k=I.learningAttempt)||null==(b=k.topic)?void 0:b.id,"?feedbackSession=1"),w:"full",children:(0,i.jsxs)(e$,{disabled:!(null==I||null==(A=I.learningAttempt)?void 0:A.quizFinished),children:[(0,i.jsxs)(eW.o,{pos:"relative",children:[H&&(0,i.jsx)(P.D8,{}),(0,i.jsx)(Y.I,{boxSize:6,children:(0,i.jsx)(eK.A,{stroke:1.5})})]}),(0,i.jsxs)(r.T,{children:[(0,i.jsx)(d.P,{fontWeight:"medium",children:"Feedback"}),(0,i.jsx)(d.P,{fontSize:"sm",color:"fg.subtle",children:F.feedback_placeholder})]}),B&&(0,i.jsx)(P.P3,{ml:"auto",mr:1})]})}),(0,i.jsx)(a.k,{to:"/related-apps/kmis/my-topic/".concat(null==I||null==(y=I.learningAttempt)||null==(z=y.topic)?void 0:z.id,"?certificateSection=1"),w:"full",children:(0,i.jsxs)(e$,{disabled:!(null==I||null==(S=I.learningAttempt)?void 0:S.feedback),children:[(0,i.jsxs)(eW.o,{pos:"relative",children:[H&&(0,i.jsx)(P.D8,{}),(0,i.jsx)(Y.I,{boxSize:6,children:(0,i.jsx)(eQ.A,{stroke:1.5})})]}),(0,i.jsxs)(r.T,{children:[(0,i.jsx)(d.P,{fontWeight:"medium",children:F.certificate}),(0,i.jsx)(d.P,{fontSize:"sm",color:"fg.subtle",children:"".concat(F.score," ").concat(null!=(q=null==I||null==(T=I.learningAttempt)?void 0:T.scoreTotal)?q:"-")})]}),O&&(0,i.jsx)(P.P3,{ml:"auto",mr:1})]})})]})]})]})},eJ=e=>{var l,t,r,o,s,a,d;let{activeMaterial:c,topicDetail:u,getTopicDetail:x,idx:m,lastIdx:h,isPublicTopic:j,...g}=e,{l:v}=(0,w.A)(),f=null==eX||null==(l=eX[null==c?void 0:c.materialType])?void 0:l.minimalStudyTime,b=(0,es.Tj)((0,es.oA)(null==u||null==(t=u.learningAttempt)?void 0:t.updatedAt),60*f),k=(0,eo.a3)((0,es.Cn)(b)),{req:A,loading:z}=(0,S.A)({id:"next-step",showLoadingToast:!1,showSuccessToast:!1,errorMessage:{422:{TIME_NOT_ELAPSED:{type:"info",title:v.info_material_time_not_elapsed.title,description:(0,T.zl)(v.info_material_time_not_elapsed.description,{minTime:"".concat(f," ").concat(null==(r=v.minutes)?void 0:r.toLowerCase()),remainingTime:"".concat(k),endTime:"".concat(b)})}}}}),P=(0,E.useRouter)(),y=null==u||null==(o=u.learningAttempt)?void 0:o.completedMaterial,_=null==u?void 0:u.material,C=(null==y?void 0:y.length)<(null==_?void 0:_.length)-1||(null==u||null==(a=u.learningAttempt)||null==(s=a.topic)?void 0:s.totalQuiz)===0;function q(){var e,l,t;P.push("/related-apps/kmis/my-topic/".concat((null==u||null==(l=u.learningAttempt)||null==(e=l.topic)?void 0:e.id)||(null==u?void 0:u.topic.id),"?activeMaterialId=").concat(null==_||null==(t=_[m+1])?void 0:t.id,"&").concat(j?"isPublic=1":""))}return(0,i.jsx)(n.t,{colorPalette:"p",w:"fit",ml:"auto",loading:z,onClick:function(){var e,l;let t=null==c?void 0:c.isCompleted,i=null==(e=_[m+1])?void 0:e.isCompleted;t||i||j?q():A({config:{url:"/api/kmis/learning-course/update/".concat(null==u||null==(l=u.learningAttempt)?void 0:l.id),method:"PATCH"},onResolve:{onSuccess:()=>{if(x(),h)if(C)p.X.create({title:v.info_quiz_not_ready.title,description:v.info_quiz_not_ready.description,action:{label:"Close",onClick:()=>{}}});else{var e,l;P.push("/related-apps/kmis/my-topic/".concat(null==u||null==(l=u.learningAttempt)||null==(e=l.topic)?void 0:e.id,"?quizStarted=1"))}else q()}}})},disabled:j&&(null==_||null==(d=_[m+1])?void 0:d.id)===void 0,...g,children:v.next})},e0=e=>{var l;let{topicDetail:t,getTopicDetail:n,isPublicTopic:o,...s}=e,{l:a}=(0,w.A)(),d=(0,E.useSearchParams)(),c=d.get("activeMaterialId")||"",u=d.get("quizStarted")||"",x=d.get("feedbackSession")||"",p=d.get("certificateSection")||"",m=!c&&!u&&!x&&!p,h=null==t?void 0:t.material,{error:j,initialLoading:g,data:v,onRetry:A}=(0,ei.A)({url:o?"/api/kmis/learning-course/get-material-public/".concat(c):"/api/kmis/learning-course/get-material/".concat(c),conditions:!!c,dependencies:[c],dataResource:!1}),z={loading:(0,i.jsx)(ed.EA,{minH:"400px",flex:1}),error:(0,i.jsx)(k.A,{onRetry:A,minH:"400px"}),empty:(0,i.jsx)(b.A,{minH:"400px"}),loaded:(0,i.jsxs)(r.T,{gap:4,children:[null==eX||null==(l=eX[null==v?void 0:v.materialType])?void 0:l.render({material:v}),(0,i.jsx)(eJ,{activeMaterial:v,topicDetail:t,getTopicDetail:n,idx:null==h?void 0:h.findIndex(e=>e.id===(null==v?void 0:v.id)),lastIdx:(null==h?void 0:h.findIndex(e=>e.id===(null==v?void 0:v.id)))===(null==h?void 0:h.length)-1,isPublicTopic:o})]})};return(0,i.jsxs)(r.T,{minH:"400px",...s,children:[m&&(0,i.jsx)(eW.o,{flex:1,bg:"body",p:4,rounded:"xl",children:(0,i.jsx)(R.A,{icon:(0,i.jsx)(eY.A,{stroke:1.5}),title:a.learning_material,description:a.msg_select_material_first,m:"auto"})}),c&&(0,i.jsxs)(i.Fragment,{children:[g&&z.loading,!g&&(0,i.jsxs)(i.Fragment,{children:[j&&z.error,!j&&(0,i.jsxs)(i.Fragment,{children:[v&&z.loaded,!v&&z.empty]})]})]}),u&&(0,i.jsx)(eb,{topicDetail:t}),x&&(0,i.jsx)(D,{topicDetail:t}),p&&(0,i.jsx)(f,{topicDetail:t})]})},e1=e=>{var l,t,n,o,s;let{topicDetail:a,getTopicDetail:d,...c}=e,u=(null==a||null==(l=a.topic)?void 0:l.topicType)!==null&&(null==a||null==(t=a.topic)?void 0:t.topicType)!==void 0&&(null==a||null==(n=a.topic)?void 0:n.topicType)!=="Pelatihan";return(0,i.jsxs)(F.$,{outerContainerProps:{flex:1},flex:1,bg:"bgContent",gap:4,...c,children:[(0,i.jsx)(eZ.H3,{fontWeight:"semibold",children:(null==a||null==(s=a.learningAttempt)||null==(o=s.topic)?void 0:o.title)||(null==a?void 0:a.topic.title)}),(0,i.jsxs)(Q.B,{flexDir:["column",null,"row"],gap:4,children:[(0,i.jsx)(r.T,{w:["full",null,"240px"],flexShrink:0,gap:4,children:(0,i.jsx)(eG,{topicDetail:a,isPublicTopic:u})}),(0,i.jsx)(e0,{maxW:["",null,"calc(100% - 240px)"],topicDetail:a,getTopicDetail:d,isPublicTopic:u})]})]})};var e4=t(73077),e5=t(36814),e2=t(52033);function e8(e){var l,t,n;let{topicId:o}=G.use(e.params),{l:s}=(0,w.A)(),a="1"===(0,E.useSearchParams)().get("isPublic"),{error:d,initialLoading:c,data:u,onRetry:x,makeRequest:p}=(0,ei.A)({initialData:void 0,url:a?"/api/kmis/learning-course/show/".concat(o):"/api/kmis/learning-course/detail/".concat(o),dataResource:!1}),m=[{label:"KMIS",path:"/related-apps/kmis?topicType=Pelatihan, Pengetahuan"},{label:s.my_course,path:"/related-apps/kmis/my-topic"}];m.push({label:(null==u||null==(t=u.learningAttempt)||null==(l=t.topic)?void 0:l.title)||(null==u||null==(n=u.topic)?void 0:n.title),path:""});let h={loading:(0,i.jsxs)(F.$,{flex:1,minH:"400px",children:[(0,i.jsx)(e5.B,{links:[{label:"KMIS",path:"/related-apps/kmis"},{label:s.my_course,path:"/related-apps/kmis/my-topic"},{label:"Loading...",path:""}],mb:4}),(0,i.jsxs)(Q.B,{flexDir:["column",null,"row"],flex:1,gap:4,w:"full",align:"stretch",children:[(0,i.jsx)(r.T,{flex:1,gap:4,children:(0,i.jsx)(ed.EA,{flex:1,rounded:"xl"})}),(0,i.jsx)(ed.EA,{flex:3.5,rounded:"xl",minH:"400px"})]})]}),error:(0,i.jsx)(k.A,{onRetry:x,minH:"400px"}),empty:(0,i.jsx)(b.A,{minH:"400px"}),loaded:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.$,{mb:4,children:(0,i.jsx)(e5.B,{links:m})}),(0,i.jsx)(e1,{topicDetail:u,getTopicDetail:p})]})};return(0,i.jsxs)(r.T,{minH:"100dvh",children:[(0,i.jsx)(e2.b,{}),(0,i.jsxs)(r.T,{flex:1,bg:"bgContent",rounded:"3xl",overflow:"clip",zIndex:2,pt:"120px",pb:[4,null,12],children:[c&&h.loading,!c&&(0,i.jsxs)(i.Fragment,{children:[d&&h.error,!d&&(0,i.jsxs)(i.Fragment,{children:[u&&h.loaded,!u&&h.empty]})]})]}),(0,i.jsx)(e4.k,{})]})}}},e=>{e.O(0,[9721,2150,7596,586,2084,9731,8250,292,2619,3672,9120,7877,400,3607,8546,642,2821,644,221,7277,8441,4696,7358],()=>e(e.s=24811)),_N_E=e.O()}]);